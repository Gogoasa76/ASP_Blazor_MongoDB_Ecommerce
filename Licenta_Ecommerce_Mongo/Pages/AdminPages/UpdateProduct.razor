@page "/updateProduct/{id}"
@using Licenta_Ecommerce_Mongo.DBConnections;
@using Licenta_Ecommerce_Mongo.Data;
@inject MongoDBWrapper mongo;
@inject NavigationManager nav;


<h3>Update Product</h3>
<div class="row">
    <div class="form-group mt-2">
        <label class="form-label" for="title">Name</label>
        <input class="form-control" placeholder="Prduct name" @bind="product.Name" type="text" />
    </div>
    <div class="form-group mt-2">
        <label class="form-label" for="title">Description</label>
        <input class="form-control" placeholder="Description" @bind="product.Description" type="text" />
    </div>
    <div class="form-group mt-2">
        <label class="form-label" for="title">Price</label>
        <input class="form-control" placeholder="Price" @bind="product.Price" type="number" />
    </div>
    <div class="form-group mt-2">
        <label class="form-label" for="title">Discount</label>
        <input class="form-control" placeholder="Discount" @bind="product.Discount" type="number" />
    </div>
    <div class="form-group mt-2">
        <label class="form-label" for="title">Quantity</label>
        <input class="form-control" placeholder="Quantity" @bind="product.Quantity" type="number" />
    </div>
    @*<div class="form-group mt-2">
        <label class="form-label" for="title">Tags</label>
        <input class="form-control" placeholder="Tags" @bind="tagsAsString" type="text" />
    </div>
    <div class="form-group mt-2">
        <label class="form-label" for="title">
            <InputFile OnChange="@OnChange" multiple></InputFile>
        </label>
    </div>*@
    <div class="form-group mt-3">
        <button type="button" class="col-sm btn btn-primary" @onclick="SubmitItem">Update</button>
    </div>
</div>
@code {
    [Parameter]
    public string id { get; set; } = string.Empty;

    public Product product { get; set; } = new();


    protected override async Task OnInitializedAsync()
    {
        product = await mongo.GetProductById(id);
    }
    public async void SubmitItem()
    {
        await mongo.UpdateProduct(product);
        nav.NavigateTo("/updateProduct");
    }
}
